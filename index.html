<!DOCTYPE html>
<html>
<head>
<script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
  <meta charset="utf-8">
  <title>JS Bin</title>
  <style type='text/css' media="all">
		td {
		  border: 1px solid blue;
		  padding: 50px;
		  background-color: white;
		  color: white;
		  opacity: 1;
		  font-size: 50px;
		}

		.changeWhite {
		 -webkit-animation: changeColor 3500ms infinite;
		}

		.popUp {
		  -webkit-animation: popUp 4500ms 1;
		  border: none;
		}

		@-webkit-keyframes changeColor {
		  0%   { color: white; }
		  20%, 70% { color: red; }
		  100% { color: white; }
		}
		@-moz-keyframes changeColor {
		  0%   { color: white; }
		  20%, 70% { color: red; }
		  100% { color: white; }
		}
		@-o-keyframes changeColor {
		  0%   { color: white; }
		  20%, 70% { color: red; }
		  100% { color: white; }
		}
		@keyframes changeColor {
		  0%   { color: white; }
		  20%, 70% { color: red; }
		  100% { color: white; }
		}

		@-webkit-keyframes popUp {
		  0% { 
		    -webkit-transform: scale(1);
		    opacity: 1;
		  }
		  50$ {
		    -webkit-transform: scale(1.3);
		    opacity: 1;
		  }
		  100% {
		    -webkit-transform: scale(0.02);
		    opacity: 0;
		  }
		}
  </style>
</head>
<body>
  
  <table>
    <tr>
      <td>
        <span class="text">1</span>
      </td>
      <td>
        <span class="text">2</span>
      </td>
    </tr>
    <tr>
      <td>
        <span class="text">2</span>
      </td>
      <td>
        <span class="text">1</span>
      </td>
    </tr>
  </table>
  <script type="text/javascript">
var prevSquareVal,
    currentSquareVal,
    $prevDiv,
    $nextDiv,
    clickCount = 0;

		$("td").on("click", function() {
		  if (!$(this).hasClass("changeWhite")) {
		    clickCount++;
		    console.log(clickCount);
		    
		    if (clickCount === 1) {
		      prevSquareVal = $(this).text();
		      $prevDiv = $(this);
		      console.log("prevSquare value", prevSquareVal);
		    }

		    console.log("added Click");
		    $(this).addClass("changeWhite");
		   
		    if (clickCount === 2) {
		      nextSquareVal = $(this).text(); 
		      $nextDiv = $(this);
		      console.log("nextSquare value", nextSquareVal);

		      clickCount = 0;
		      if (prevSquareVal === nextSquareVal) {
		        $(".changeWhite .text").addClass("popUp");
		       $(".popUp").parent().css({
		         "border": "none",
		         "pointer-events": "none"
		       });        $(".popUp").parent().removeClass("changeWhite");
		      } else {
		        setTimeout(function() {
		          $("td").removeClass("changeWhite");        
		        }, 1300);  
		      }

		    }
		  }
		    
		});
  </script>
</body>
</html>